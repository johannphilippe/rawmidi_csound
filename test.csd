<CsoundSynthesizer>
<CsOptions>
-odac
;-+rtmidi=alsaseq
;-M hw:1,0
--opcode-lib="./librawmidi.so"
</CsOptions>
; ==============================================
<CsInstruments>

// MIDI baud rate 31250

sr	=	48000
ksmps	=	64
nchnls	=	2
0dbfs	=	1


instr 2
	iZone = 0x00
	iX = 0x72
	iY = 0x30
	iR = 0x74
	iG = 0x74
	iB = 0x74
/*
	iPix[] fillarray 0xF0, 0x00, 0x21, 0x50, 0x00, 0x01, 0x00, 0x01, 0x01, 0x01, 0x04, 0x21, iZone, iX, iY, iR, iG, iB, 0xF7
	ilen = lenarray(iPix)
	rawmidi_out(1, ilen, iPix, 2)
*/


	iW = 0x35
	iH= 0x45
	iRect[] sysex_arr  0xF0, 0x00, 0x21, 0x50, 0x00, 0x01, 0x00, 0x01, 0x01, 0x01, 0x04, 0x22, iZone, iX, iY, iW, iH, iR, iG, iB, 0xF7
	ilen = lenarray(iRect)
	rawmidi_out(1, ilen, iRect, 2)
endin

instr 1	
	rawmidi_list_devices 2

	; first disable
	iDis[] fillarray 0xF0, 0x00, 0x21, 0x50, 0x00, 0x01, 0x00, 0x01, 0x01, 0x01, 0x04, 0x02, 0xF7
	ilen = lenarray(iDis)
	rawmidi_out(1, ilen, iDis, 2)

/*
	; enable Sysex
	iArr[] fillarray 0xF0, 0x00, 0x21, 0x50, 0x00, 0x01, 0x00, 0x01, 0x01, 0x01, 0x04, 0x01, 0x00, 0x00, 0x01, 0xF7
	ilen = lenarray(iArr)
	rawmidi_out(1, ilen, iArr, 2)
*/

/*

	iZone = 0x00
	iX = 0x72
	iY = 0x30
	iR = 0x74
	iG = 0x74
	iB = 0x74
	iPix[] fillarray 0xF0, 0x00, 0x21, 0x50, 0x00, 0x01, 0x00, 0x01, 0x01, 0x01, 0x04, 0x21, iZone, iX, iY, iR, iG, iB, 0xF7
	ilen = lenarray(iPix)
	rawmidi_out(1, ilen, iPix, 2)


	iW = 0x35
	iH= 0x45
	iRect[] sysex_arr  0x00, 0x21, 0x50, 0x00, 0x01, 0x00, 0x01, 0x01, 0x01, 0x04, 0x22, iZone, iX, iY, iW, iH, iR, iG, iB
	ilen = lenarray(iRect)
	rawmidi_out(1, ilen, iRect, 2)

*/

	ksize, kArr[] rawmidi_in 1, 2
	ktrig = (kArr[0] == 0xF0 && ksize > 0) ? 1 : 0
	sysex_print(kArr, ktrig)

	;print p3
	;rawmidi_list_devices(2)
	;ksize, kdata[] rawmidi_in 1, 2
	;printk2 kdata[0]
	
endin




</CsInstruments>
; ==============================================
<CsScore>
f 0 z
i 1 0 -1


</CsScore>
</CsoundSynthesizer>

